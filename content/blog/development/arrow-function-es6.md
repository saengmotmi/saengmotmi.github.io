---
title: arrow function ES6
date: 2020-02-08 14:02:66
category: development
draft: false
---

enemy rains 게임(플레이어가 이동하며 하늘에서 떨어지는 귀신 이미지를 터치하는 방식)의 핵심 기능들에 대한 구현이 끝났다.

setInterval() 함수의 다소 생소한 작동방식이 문제였지 그 외적인 것들이 썩 어렵지는 않은 편이었다.

## 되긴 되는데... 문제가 있습니다

그런데 게임을 완성했다고 하기에는 해결 하지 못한 문제가 남아 있었다.

1. 목적이 다른 setInterval 함수 간 타이밍 문제
2. 인터벌마다 컨트롤하고자 하는 element 들을 배열에 매번 재할당 해야 하는 비효율

1번의 경우 새 고스트 element를 생성하고 이동시키는 setInterval, 일정 시간이 지난 다음 차례로 고스트 element를 제거하는 setInterval 두 개가 따로 돌았다. 이 경우 화면에 그려지는 개체가 많아지거나 두 인터벌의 타이밍이 꼬일 경우 고스트들이 제대로 제거되지 않거나 고스트 생성 위치가 틀어지는 문제가 발생했다.

2번의 경우 성능 저하 문제가 있었다. 내가 구현한 방식은 이렇다.

- setInterval을 사용해 일정 시간 마다 ghost-down이라는 클래스명을 가진 새 고스트를 생성한다
- 일정 인터벌마다 화면에 getElementsbyClassName을 사용해 화면에 그려진 ghost-down 클래스 element들을 배열에 담아온다
- 반복문을 활용해 그 배열의 인덱스를 0부터 arr.length까지 돌면서 특정 px씩 아래로 이동시킨다
- 특정 높이에 도달했을 경우 피격 판정을 준다

그러나 이 경우 배열에 담아야 하는 element의 수가 많아질 수록 연산량이 급증했고, 1번과 유사한 오류를 발생시켰다.

## Class를 활용해 고스트를 찍어내자

이러한 문제를 해결하려면 자바스크립트의 class 개념을 활용해야 한다.

class는 object를 생성하는 일종의 프로그래밍적 붕어빵 틀이다.

class 개념을 이해하는 도중에 fucntion scope 문제로 this 객체를 사용하는데 문제가 발생할 수 있다는 조언을 들었다.
